## ----setup, include=FALSE------------------------------------------------------------------------------------------------
library(tidyverse)
set.seed(60637)


## .small-output .remark-code{

##   font-size: small;

## }

## 

## .highlight-last-item > ul > li,

## .highlight-last-item > ol > li {

##   opacity: 0.5;

## }

## .highlight-last-item > ul > li:last-of-type,

## .highlight-last-item > ol > li:last-of-type {

##   opacity: 1;

## }


## ----coinflip------------------------------------------------------------------------------------------------------------
Omega <- c('HH', 'HT', 'TH', 'TT')
probs <- c(0.25, 0.25, 0.25, 0.25)

sample(x = Omega,
       size = 1,
       prob = probs)



## ----coinflip_many-------------------------------------------------------------------------------------------------------
n <- 1000
result_n <- sample(x = Omega,
       size = n,
       prob = probs,
       replace = TRUE)

table(result_n)


## ----check---------------------------------------------------------------------------------------------------------------
Omega <- c('HH', 'HT', 'TH', 'TT');  probs <- c(0.25, 0.25, 0.25, 0.25)
result_n <- sample(x = Omega, 
                   size = n,
                   prob = probs,
                   replace = TRUE)

(observed_props <- prop.table(table(result_n)))


## ----PA------------------------------------------------------------------------------------------------------------------
(PA <- mean(result_n == 'HT' | result_n == 'HH'))


## ----PB------------------------------------------------------------------------------------------------------------------
(PB <- mean(result_n == 'TH' | result_n == 'HH'))


## ----PAB-----------------------------------------------------------------------------------------------------------------
(PAB <- mean(result_n == 'HH'))
PA*PB


## ----check2--------------------------------------------------------------------------------------------------------------
(observed_props <- prop.table(table(result_n)))


## ----PA2-----------------------------------------------------------------------------------------------------------------
(PA <- mean(result_n == 'HT' | result_n == 'HH'))


## ----PB2-----------------------------------------------------------------------------------------------------------------
(PB <- mean(result_n == 'HH'))


## ----PAB2----------------------------------------------------------------------------------------------------------------
(PAB <- mean(result_n == 'HH'))
PA*PB


## ----PA3-----------------------------------------------------------------------------------------------------------------
PA <- 0.03


## ----PB3-----------------------------------------------------------------------------------------------------------------
PB <- 0.05


## ----PBifA---------------------------------------------------------------------------------------------------------------
PB_if_A <- 0.95


## ----Bayes---------------------------------------------------------------------------------------------------------------
( PB_if_A * PA )/PB


## ----covid-race, out.width="50%", echo=FALSE, fig.align = 'center'-------------------------------------------------------
knitr::include_graphics('assets/covid_and_race.png')


## ----covid-mortality, out.width="90%", echo=FALSE, fig.align = 'center'--------------------------------------------------
knitr::include_graphics('assets/covid_mortality_rates.png')


## ----covid-risk, out.width="90%", echo=FALSE, fig.align = 'center'-------------------------------------------------------
knitr::include_graphics('assets/covid_risk.png')


## ----npr, echo=FALSE-----------------------------------------------------------------------------------------------------
knitr::include_graphics('assets/npr.png')


## ----guardian, echo=FALSE------------------------------------------------------------------------------------------------
knitr::include_graphics('assets/guardian.png')


## ----johnson, echo=FALSE-------------------------------------------------------------------------------------------------
knitr::include_graphics('assets/johnson-et-al-PNAS.png')


## ----knit, echo=FALSE, message=FALSE, warning=FALSE, eval=FALSE----------------------------------------------------------
## knitr::purl(input = "slides_iqss_week_2_pt1.Rmd",
##             output = "../code_etc_from_lecture/slides_iqss_week_2_pt1.R")

