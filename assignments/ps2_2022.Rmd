---
title: "Problem set 2"
author: "Your name here"
date: "Due 10/11/2022 at 5pm"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

*\textsc{Note}: Start with the file `ps2_2022.Rmd` (available from the github repository at https://github.com/UChicago-pol-methods/IntroQSS-F22/tree/main/assignments). Modify that file to include your answers. Make sure you can "knit" the file (e.g. in RStudio by clicking on the `Knit` button). Submit both the Rmd file and the knitted PDF via Canvas* 

## Question 1: Probability 

Consider the random process of flipping a weighted coin three times, where the probability of getting heads on any single flip is 0.8.

**(1a) Describe the sample space, $\Omega$.** 

$$
\Omega = \{<\text{your answer here} >\}
$$


**(1b) The random variable $X$ that we're interested is the number of heads that we get from our random process. Write out the probability mass function for this random variable. $f_X(x)$.** *Hint: Note how many heads we get in each event from part 1a. Then look at the proportion of times we get no heads, one head, etc. These proportions are equal to the probability. List the number of heads under the $x$ column. List the associated probabilities under the $P(X=x)$ column.*


| $x$  | $P(X = x)$ |
|------|------------|
|      |            |


**(1c) Calculate the mean of this random variable. Please show your work.**



**(1c) Write out code to simulate this random process, where the output is a single realization of the random variable (i.e., a number that represents the number of heads in your coin flips).**

*\textsc{Note}: I set a random seed here, so that every time you recompile your assignment, you'll get the same number. For analyses that involve sampling or random processes, it is really important to set a random seed so that you can get reproducible results. Feel free to change the seed number to anything you want. In general you will only want to set your random seed ONCE per script.*

```{r, simulate}
set.seed(60637)
# your code here
```


**(1d) Now run your random process so you sample from it 10,000 times [PLEASE DON'T OUTPUT ALL 10,000 OBSERVATIONS IN YOUR HOMEWORK, just save it to an R object]. What is the average number of heads across these 10k observations? This is the sample mean for a given sample.**

```{r, simulate10k}
# your code here
```

**(1e): Write your own function called `my_summary()` that outputs a vector which is the minimum, maximum, and mean of a vector. Apply your function to your size 10k sample that you saved in the last problem.** 


```{r, my_summary}
# your code here
```


## Question 2: More probability 

Using the same random process of flipping three fair coins, code the random variable $Y$ as 1 if we get three heads, and 0 otherwise. 

**(2a) Write out the probability mass function for the random variable $Y$, i.e., $f_Y(y)$** 


| $y$  | $P(Y = y)$ |
|------|------------|
|      |            |


**(2a) Write out the joint probability mass function $f_{X,Y}(x,y)$ for the joint distribution of $X$ and $Y$.** 

| $x$  | $y$  | $P(X = x, Y = y)$ |
|------|------|-------------------|
|      |      |                   |


**(2b) Write out the probability mass function for the random variable $X$ *conditional* on $Y$, i.e., $f_{X|Y}(x|y)$** 

| $x$  | $y$  | $P(X = x| Y = y)$ |
|------|------|-------------------|
|      |      |                   |

**(2b) Are $X$ and $Y$ *independent* random variables? Show why or why not.** *Hint: See definition 1.3.16 in Aronow & Miller.*


## Question 3: Programming (US presidential election results, again) 


**Download the file "tidy_county_pres_results.csv.zip" from the repository (https://github.com/UChicago-pol-methods/IntroQSS-F22/tree/main/data), unzip it, and put the CSV file in the same directory as your Rmd file.**

**Then load the data:**

```{r message=F}
library(tidyverse)
df <- read_csv("tidy_county_pres_results.csv")
```

**For each US county (uniquely identified by `FIPS` and labeled with `county` and `state`) in each presidential election `year`, we have the total number of votes cast (`total_vote`), number of votes for the Democratic candidate (`dem_vote`), and number of votes for the Republican candidate (`rep_vote`).**

**(3a) Add a variable called `other_vote_share`, which is the proportion of votes cast for candidates other than the Democrat and the Republican.**

```{r}
# your code here
```

**(3b) Show a histogram of `other_vote_share` in 2000.**

```{r}
# histogram code here 
```

**(3c) Identify the counties with the highest `other_vote_share` in 2000. Output a table showing the county name, state, and `other_vote_share` for the seven counties with the highest `other_vote_share` in 2000. (Don't worry about making the table look nice; just produce the raw `R` output.)**

```{r}
# table code here 
```

**(3d) Using `group_by()` and `summarize()`, produce and store a new `tibble` showing the two-party vote share for the Democrat in each election year. ("Two-party vote share for the Democrat" is the votes for the Democrat divided by the votes for either the Democrat or the Republican.) Use it to make a plot showing the Democrats' two-party vote share (vertical axis) across years (horizontal axis).**

```{r}
# your code here 
```

**(3e) Using `group_by()` and `summarize()`, produce and store a new `tibble` showing the proportion of counties in which the Democrat got more votes than the Republican in each election year. Use it to make a plot showing the share of counties won by the Democrat (vertical axis) across years (horizontal axis).**

```{r}
# your code here
```

**(3f) Use `left_join()` to merge the two tibbles (one with county share, the other with vote share) and store the result. Use this new tibble to plot the Democratic county share (vertical axis) against the Democratic vote share (horizontal axis) over time, as in the last problem set.**

```{r}
# your code here 
```

**(3g) Use `pivot_longer()` to convert the tibble created in the last question to a format appropriate for plotting both the Democratic vote share and the Democratic county share (vertical axis) against the year (horizontal axis) as on the last problem set. Make that plot.**

```{r}
# your code here 
```



## Question 4: independent project data

Choose a dataset that you could use for your independent project. As noted last week, it should have many observations (but not too many) and many variables. And it should be interesting to you! Load the data and make a figure using tools we have learned in class.


